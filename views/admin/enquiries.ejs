<%- include("../partials/admin-start", { title }) %>

<h1 class="text-3xl font-serif text-thought mb-8">Enquiries</h1>

<% if (saved) { %>
  <div class="mb-6 border border-action/30 bg-white p-4 text-thought/80">Saved.</div>
<% } %>

<div class="space-y-4">
  <% (submissions || []).forEach((sub) => { %>
    <div class="p-6 border <%= sub.read ? 'bg-gray-50 border-gray-200' : 'bg-white border-action/30' %> shadow-sm">
      <div class="flex justify-between items-start mb-4">
        <div>
          <h3 class="text-lg font-bold text-thought"><%= sub.subject %></h3>
          <div class="text-sm text-thought/60 flex items-center gap-2 mt-1">
            <span><%= sub.email %></span>
            <span class="text-warmth">&middot;</span>
            <span><%= sub.name %></span>
            <span class="text-warmth">&middot;</span>
            <span><%= new Date(sub.createdAt).toLocaleString() %></span>
          </div>
        </div>

        <% if (!sub.read) { %>
          <form method="post" action="/admin/enquiries/<%= encodeURIComponent(sub.id) %>/read">
            <button type="submit" class="text-xs bg-action/10 text-action px-3 py-1 rounded hover:bg-action/20 transition-colors">
              Mark as Read
            </button>
          </form>
        <% } else { %>
          <div class="text-xs text-green-600">Read</div>
        <% } %>
      </div>

      <p class="text-thought/80 whitespace-pre-wrap"><%= sub.message %></p>
    </div>
  <% }) %>

  <% if (!submissions || submissions.length === 0) { %>
    <div class="p-12 text-center border border-dashed border-warmth/30 rounded">
      <p class="text-thought/60">No enquiries yet.</p>
    </div>
  <% } %>
</div>

<%- include("../partials/admin-end") %>

